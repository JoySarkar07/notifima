(()=>{"use strict";var o,t={90432:(o,t,e)=>{const r=window.ReactJSXRuntime,i=window.wp.blocks,n=window.wp.blockEditor,c=window.wp.i18n,a=window.wp.element,l=window.wp.data;var u=e(71083),d=function(){return d=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i]);return o},d.apply(this,arguments)};(0,i.registerBlockType)("notifima/stock-notification-block",{title:(0,c.__)("Stock Notification Block","notifima"),description:(0,c.__)("This block can be connected to WooCommerce Out-of-Stock and Backorder products to provide a stock notification form for users.","notifima"),category:"woocommerce",icon:"clipboard",supports:{html:!1},attributes:{productId:{type:"number",default:void 0}},edit:function(o){var t=o.attributes,e=o.setAttributes,i=(0,n.useBlockProps)(),f=(0,a.useState)((0,c.__)("Loading form...","notifima")),s=f[0],p=f[1],v=(0,l.useSelect)((function(o){var t,e,r=o("core/block-editor").getBlocks().find((function(o){return"woocommerce/single-product"===o.name}));return null!==(e=null===(t=null==r?void 0:r.attributes)||void 0===t?void 0:t.productId)&&void 0!==e?e:null}),[]);return(0,a.useEffect)((function(){v&&v!==t.productId&&e({productId:v})}),[v]),(0,a.useEffect)((function(){v?u.A.get("".concat(stockNotificationBlock.apiUrl,"/").concat(stockNotificationBlock.restUrl,"/stock-notification-form?product_id=").concat(v)).then((function(o){p(o.data.html||(0,c.__)("Failed to load form.","notifima"))})):p((0,c.__)("No product selected.","notifima"))}),[v]),(0,r.jsx)("div",d({},i,{children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:s}})}))},save:function(){return null}})}},e={};function r(o){var i=e[o];if(void 0!==i)return i.exports;var n=e[o]={exports:{}};return t[o](n,n.exports,r),n.exports}r.m=t,o=[],r.O=(t,e,i,n)=>{if(!e){var c=1/0;for(d=0;d<o.length;d++){for(var[e,i,n]=o[d],a=!0,l=0;l<e.length;l++)(!1&n||c>=n)&&Object.keys(r.O).every((o=>r.O[o](e[l])))?e.splice(l--,1):(a=!1,n<c&&(c=n));if(a){o.splice(d--,1);var u=i();void 0!==u&&(t=u)}}return t}n=n||0;for(var d=o.length;d>0&&o[d-1][2]>n;d--)o[d]=o[d-1];o[d]=[e,i,n]},r.d=(o,t)=>{for(var e in t)r.o(t,e)&&!r.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:t[e]})},r.o=(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r.r=o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},(()=>{var o={174:0};r.O.j=t=>0===o[t];var t=(t,e)=>{var i,n,[c,a,l]=e,u=0;if(c.some((t=>0!==o[t]))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(l)var d=l(r)}for(t&&t(e);u<c.length;u++)n=c[u],r.o(o,n)&&o[n]&&o[n][0](),o[n]=0;return r.O(d)},e=globalThis.webpackChunknotifima=globalThis.webpackChunknotifima||[];e.forEach(t.bind(null,0)),e.push=t.bind(null,e.push.bind(e))})();var i=r.O(void 0,[147],(()=>r(90432)));i=r.O(i)})();