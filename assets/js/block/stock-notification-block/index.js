(()=>{"use strict";var o,t={90432:(o,t,e)=>{const r=window.ReactJSXRuntime,n=window.wp.blocks,i=window.wp.blockEditor,c=window.wp.i18n,a=window.wp.element,l=window.wp.data;var u=e(71083),d=function(){return d=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},d.apply(this,arguments)};(0,n.registerBlockType)("notifima/stock-notification-block",{title:(0,c.__)("Stock Notification Block","notifima"),description:(0,c.__)("This block can be connected to WooCommerce Out-of-Stock and Backorder products to provide a stock notification form for users.","notifima"),category:"woocommerce",icon:"clipboard",supports:{html:!1},attributes:{productId:{type:"number",default:void 0}},edit:function(o){var t=o.attributes,e=o.setAttributes,n=(0,i.useBlockProps)(),s=(0,a.useState)((0,c.__)("Loading form...","notifima")),f=s[0],p=s[1],m=(0,l.useSelect)((function(o){var t,e,r=o("core/block-editor").getBlocks().find((function(o){return"woocommerce/single-product"===o.name}));return null!==(e=null===(t=null==r?void 0:r.attributes)||void 0===t?void 0:t.productId)&&void 0!==e?e:null}),[]);return(0,a.useEffect)((function(){m&&m!==t.productId&&e({productId:m})}),[m]),(0,a.useEffect)((function(){m?u.A.get("".concat(stockNotificationBlock.apiUrl,"/").concat(stockNotificationBlock.restUrl,"/stock-notification-form?product_id=").concat(m)).then((function(o){p(o.data.html||(0,c.__)("Failed to load form.","notifima"))})):p((0,c.__)("No product selected.","notifima"))}),[m]),(0,r.jsx)("div",d({},n,{children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:f}})}))},save:function(){return null}})}},e={};function r(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,r),i.exports}r.m=t,o=[],r.O=(t,e,n,i)=>{if(!e){var c=1/0;for(d=0;d<o.length;d++){for(var[e,n,i]=o[d],a=!0,l=0;l<e.length;l++)(!1&i||c>=i)&&Object.keys(r.O).every((o=>r.O[o](e[l])))?e.splice(l--,1):(a=!1,i<c&&(c=i));if(a){o.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=o.length;d>0&&o[d-1][2]>i;d--)o[d]=o[d-1];o[d]=[e,n,i]},r.d=(o,t)=>{for(var e in t)r.o(t,e)&&!r.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:t[e]})},r.o=(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r.r=o=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.j=174,(()=>{var o={174:0};r.O.j=t=>0===o[t];var t=(t,e)=>{var n,i,[c,a,l]=e,u=0;if(c.some((t=>0!==o[t]))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(l)var d=l(r)}for(t&&t(e);u<c.length;u++)i=c[u],r.o(o,i)&&o[i]&&o[i][0](),o[i]=0;return r.O(d)},e=globalThis.webpackChunkwoocommerce_product_stock_manager=globalThis.webpackChunkwoocommerce_product_stock_manager||[];e.forEach(t.bind(null,0)),e.push=t.bind(null,e.push.bind(e))})();var n=r.O(void 0,[504],(()=>r(90432)));n=r.O(n)})();